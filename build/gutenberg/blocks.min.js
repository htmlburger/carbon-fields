/*! For license information please see blocks.min.js.LICENSE.txt */
(()=>{var e={284:(e,t,n)=>{e.exports={forEach:n(458),fromObs:n(751),fromIter:n(258),fromEvent:n(550),fromPromise:n(571),interval:n(988),map:n(774),scan:n(72),flatten:n(515),take:n(967),skip:n(144),filter:n(996),merge:n(286),concat:n(796),combine:n(930),share:n(949),pipe:n(835)}},930:e=>{const t={};e.exports=(...e)=>(n,r)=>{if(0!==n)return;const o=e.length;if(0===o)return r(0,(()=>{})),r(1,[]),void r(2);let i=o,l=o,c=o;const a=new Array(o),s=new Array(o),u=(e,t)=>{if(0!==e)for(let n=0;n<o;n++)s[n](e,t)};e.forEach(((e,n)=>{a[n]=t,e(0,((e,f)=>{if(0===e)s[n]=f,0==--i&&r(0,u);else if(1===e){const e=l?a[n]===t?--l:l:0;if(a[n]=f,0===e){const e=new Array(o);for(let t=0;t<o;++t)e[t]=a[t];r(1,e)}}else 2===e?0==--c&&r(2):r(e,f)}))}))}},796:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const r={},o=(...e)=>(t,n)=>{if(0!==t)return;const o=e.length;if(0===o)return n(0,(()=>{})),void n(2);let i,l=0,c=r;const a=(e,t)=>{1===e&&(c=t),i(e,t)};!function t(){l!==o?e[l](0,((e,o)=>{0===e?(i=o,0===l?n(0,a):c!==r&&i(1,c)):2===e&&o?n(2,o):2===e?(l++,t()):n(e,o)})):n(2)}()}},996:e=>{e.exports=e=>t=>(n,r)=>{if(0!==n)return;let o;t(0,((t,n)=>{0===t?(o=n,r(t,n)):1===t?e(n)?r(t,n):o(1):r(t,n)}))}},515:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=e=>(t,n)=>{if(0!==t)return;let r,o;function i(e,t){1===e&&(o||r)(1,t),2===e&&(o&&o(2),r&&r(2))}e(0,((e,t)=>{if(0===e)r=t,n(0,i);else if(1===e){const e=t;o&&o(2),e(0,((e,t)=>{0===e?(o=t,o(1)):1===e?n(1,t):2===e&&t?(r&&r(2),n(2,t)):2===e&&(r?(o=void 0,r(1)):n(2))}))}else 2===e&&t?(o&&o(2),n(2,t)):2===e&&(o?r=void 0:n(2))}))}},458:e=>{e.exports=e=>t=>{let n;t(0,((t,r)=>{0===t&&(n=r),1===t&&e(r),1!==t&&0!==t||n(1)}))}},550:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=(e,t,n)=>(r,o)=>{if(0!==r)return;let i=!1;const l=e=>{o(1,e)};if(o(0,(r=>{if(2===r)if(i=!0,e.removeEventListener)e.removeEventListener(t,l,n);else{if(!e.removeListener)throw new Error("cannot remove listener from node. No method found.");e.removeListener(t,l)}})),!i)if(e.addEventListener)e.addEventListener(t,l,n);else{if(!e.addListener)throw new Error("cannot add listener to node. No method found.");e.addListener(t,l)}}},258:e=>{e.exports=e=>(t,n)=>{if(0!==t)return;const r="undefined"!=typeof Symbol&&e[Symbol.iterator]?e[Symbol.iterator]():e;let o,i=!1,l=!1,c=!1;n(0,(e=>{c||(1===e?(l=!0,i||o&&o.done||function(){for(i=!0;l&&!c;){if(l=!1,o=r.next(),o.done){n(2);break}n(1,o.value)}i=!1}()):2===e&&(c=!0))}))}},751:(e,t,n)=>{const r=n(121).Z;e.exports=e=>(t,n)=>{if(0!==t)return;let o;n(0,(e=>{2===e&&o&&(o.unsubscribe?o.unsubscribe():o())})),e=e[r]?e[r]():e,o=e.subscribe({next:e=>n(1,e),error:e=>n(2,e),complete:()=>n(2)})}},571:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=e=>(t,n)=>{if(0!==t)return;let r=!1;e.then((e=>{r||(n(1,e),r||n(2))}),((e=new Error)=>{r||n(2,e)})),n(0,(e=>{2===e&&(r=!0)}))}},988:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=e=>(t,n)=>{if(0!==t)return;let r=0;const o=setInterval((()=>{n(1,r++)}),e);n(0,(e=>{2===e&&clearInterval(o)}))}},774:e=>{e.exports=e=>t=>(n,r)=>{0===n&&t(0,((t,n)=>{r(t,1===t?e(n):n)}))}},286:e=>{e.exports=function(...e){return(t,n)=>{if(0!==t)return;const r=e.length,o=new Array(r);let i=0,l=0;const c=e=>{if(0!==e)for(let t=0;t<r;t++)o[t]&&o[t](e)};for(let t=0;t<r;t++)e[t](0,((e,a)=>{0===e?(o[t]=a,1==++i&&n(0,c)):2===e?(o[t]=void 0,++l===r&&n(2)):n(e,a)}))}}},835:e=>{e.exports=function(...e){let t=e[0];for(let n=1,r=e.length;n<r;n++)t=e[n](t);return t}},72:e=>{e.exports=function(e,t){let n=2===arguments.length;return r=>(o,i)=>{if(0!==o)return;let l=t;r(0,((t,r)=>{1===t?(l=n?e(l,r):(n=!0,r),i(1,l)):i(t,r)}))}}},949:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=e=>{let t,n=[];return function(r,o){if(0!==r)return;n.push(o);const i=(e,r)=>{if(2===e){const e=n.indexOf(o);e>-1&&n.splice(e,1),n.length||t(2)}else t(e,r)};1!==n.length?o(0,i):e(0,((e,r)=>{if(0===e)t=r,o(0,i);else for(let t of n.slice(0))t(e,r);2===e&&(n=[])}))}}},144:e=>{e.exports=e=>t=>(n,r)=>{if(0!==n)return;let o,i=0;t(0,((t,n)=>{0===t?(o=n,r(t,n)):1===t&&i<e?(i++,o(1)):r(t,n)}))}},967:e=>{e.exports=e=>t=>(n,r)=>{if(0!==n)return;let o,i,l=0;function c(t,n){2===t?(i=!0,o(t,n)):l<e&&o(t,n)}t(0,((t,n)=>{0===t?(o=n,r(0,c)):1===t?l<e&&(l++,r(t,n),l!==e||i||(i=!0,o(2),r(2))):r(t,n)}))}},184:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var l=o.apply(null,n);l&&e.push(l)}}else if("object"===i){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var c in n)r.call(n,c)&&n[c]&&e.push(c)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},270:()=>{},207:()=>{},992:()=>{},172:()=>{},574:()=>{},221:()=>{},545:()=>{},998:()=>{},442:()=>{},790:()=>{},730:()=>{},1:()=>{},519:()=>{},455:()=>{},491:()=>{},604:()=>{},562:()=>{},160:()=>{},121:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r}),e=n.hmd(e);const r=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:e)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r](i,i.exports,n),i.loaded=!0,i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{setupContainerDefinitions:()=>A,setupFieldDefinitions:()=>L});var t={};function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===r(t)?t:String(t)}function i(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{getContainerDefinitionByBlockName:()=>M,getFieldDefinitionsByBlockName:()=>U});const l=wp.data,c=wp.blocks,a=wp.i18n,s=lodash,u=wp.compose,f=wp.hooks,d=cf.core;var p=function(e,t){return e===t},b=n(284);function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,s.mapKeys)(e,(function(e,n){return"".concat((0,s.repeat)("parent.",t)).concat(n)}))}function m(e){return(0,s.startsWith)(e,"cf-")}const v=(0,d.withConditionalLogic)((function(e){return(0,b.pipe)((0,d.fromSelector)((0,l.select)("core/block-editor").getBlock,e.blockId),function(e){return void 0===e&&(e=p),function(t){return function(n,r){if(0===n){var o,i,l=!1;t(0,(function(t,n){0===t&&(i=n),1===t?l&&e(o,n)?i(1):(l=!0,o=n,r(1,n)):r(t,n)}))}}}}(),(0,b.map)((function(e){var t;return null==e||null===(t=e.attributes)||void 0===t?void 0:t.data})))}),(function(e,t){var n={};if((0,s.has)(t,e.field.base_name))n=h((0,s.omit)(t,[e.field.base_name]));else{var r=e.id.split("__");r.shift();var o=r.shift();r.pop();var i=r.reduce((function(e,t){return m(t)?e:e+1}),0);n=h(n=(0,s.omit)(t,[o]),i+1);for(var l=o;r.length>0;){var c=r.shift(),a=m(c),u=!a;if(a){var f=(0,s.findIndex)((0,s.get)(t,l),["_id",c]);l="".concat(l,".").concat(f);var d=(0,s.get)(t,l);d=h(d=(0,s.omit)(d,["_id","_type",e.field.base_name]),i),(0,s.assign)(n,d)}u&&(l="".concat(l,".").concat(c),i--)}}return n}));function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function k(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}function j(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(992),(0,f.addFilter)("carbon-fields.association.block","carbon-fields/blocks",(0,d.withProps)((function(e){return{hierarchyResolver:function(){var t=(0,l.select)("core/block-editor").getBlock(e.blockId),n=e.id.split("__");n.shift();for(var r=n.shift(),o="data.".concat(r);n.length>0;){var i=n.shift();if(0===i.indexOf("cf-")){var c=(0,s.get)(t.attributes,"".concat(o)),a=(0,s.find)(c,["_id",i]),u=c.indexOf(a);o="".concat(o,".").concat(u),r="".concat(r,"[").concat(u,"]:").concat(a._type,"/")}else o="".concat(o,".").concat(i),r="".concat(r).concat(i)}return r}}})));const I=cf.vendor.immer;var F=n.n(I);const C=wp.element;n(574),n(207);const G=(0,d.withFilters)("carbon-fields.field-wrapper.block")(d.Field);var T=function(e){S(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return i(O(e=t.call.apply(t,[this].concat(o))),"state",{collapsedGroups:e.props.value.reduce((function(t,n){var r=n._id,o=n._type;return(0,s.find)(e.props.field.groups,["name",o]).collapsed?t.concat(r):t}),[])}),i(O(e),"handleAddGroup",(function(t,n){var r=e.props,o=r.id,i=r.value,l=r.onChange,c={};c._id=(0,d.uniqueId)(),c._type=t.name,t.fields.reduce((function(e,t){return e[t.base_name]=t.default_value,e}),c),l(o,i.concat(c)),n(c)})),i(O(e),"handleCloneGroup",(function(t,n){var r=e.props,o=r.id,i=r.value,l=r.onChange,c=i.indexOf(t),a=(0,s.cloneDeep)(t);a._id=(0,d.uniqueId)(),l(o,F()(i,(function(e){e.splice(c+1,0,a)}))),n(a)})),i(O(e),"handleRemoveGroup",(function(t){var n=e.props,r=n.id,o=n.value,i=n.onChange,l=(0,s.findIndex)(o,["_id",t._id]);i(r,F()(o,(function(e){e.splice(l,1)}))),e.setState((function(e){var n=e.collapsedGroups;return{collapsedGroups:(0,s.without)(n,t._id)}}))})),i(O(e),"handleToggleGroup",(function(t){e.setState((function(e){var n=e.collapsedGroups;return{collapsedGroups:n=n.indexOf(t)>-1?(0,s.without)(n,t):[].concat(g(n),[t])}}))})),i(O(e),"handleToggleAllGroups",(function(){var t=e.props.value;e.setState((function(e){var n=e.collapsedGroups;return{collapsedGroups:n=n.length!==t.length?t.map((function(e){return e._id})):[]}}))})),i(O(e),"handleGroupSetup",(function(t,n){var r=(0,s.get)((0,s.find)(e.props.field.groups,["name",t._type]),"fields",[]),o=(0,s.omit)(t,["_id","_type"]);return(0,s.assign)({},n,{id:t._id,fields:r,collapsed:e.state.collapsedGroups.indexOf(t._id)>-1,context:"block",values:o})})),i(O(e),"handleGroupFieldSetup",(function(t,n,r){var o=e.props.blockId,i="".concat(e.props.id,"__").concat(r.id,"__").concat(t.base_name),l=(0,s.get)(r,"values.".concat(t.base_name));return[G,(0,s.assign)({},n,{key:i,id:i,name:t.base_name,containerId:e.props.containerId,blockId:o,field:t,value:l,onChange:e.handleGroupFieldChange})]})),i(O(e),"handleGroupFieldChange",(function(t,n){var r=e.props,o=r.id,i=r.value;(0,r.onChange)(o,F()(i,(function(e){var r=t.split("__"),o=r.pop(),i=(0,s.find)(e,["_id",r.pop()]);(0,s.set)(i,o,n)})))})),e}return k(n,[{key:"getGroupValues",value:function(){return this.props.value.map((function(e){var t=(0,s.mapKeys)((0,s.omit)(e,["_id","_type"]),(function(e,t){return t.replace(/\-/g,"_")}));return[e._type,t]}))}},{key:"render",value:function(){var e=this.handleGroupSetup,t=this.handleGroupFieldSetup,n=this.handleAddGroup,r=this.handleCloneGroup,o=this.handleRemoveGroup,i=this.handleToggleGroup,l=this.handleToggleAllGroups,c=this.props,a=c.value;return(0,c.children)({groupValues:this.getGroupValues(),allGroupsAreCollapsed:this.state.collapsedGroups.length===a.length,handleGroupSetup:e,handleGroupFieldSetup:t,handleAddGroup:n,handleCloneGroup:r,handleRemoveGroup:o,handleToggleGroup:i,handleToggleAllGroups:l})}}]),n}(C.Component);function B(){return(B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}(0,f.addFilter)("carbon-fields.complex.block","carbon-fields/blocks",(function(e){return function(t){var n=t.id,r=t.name,o=t.value,i=t.error,l=t.field;return wp.element.createElement(T,t,(function(c){var a=c.groupValues,s=c.allGroupsAreCollapsed,u=c.handleGroupSetup,f=c.handleGroupFieldSetup,d=c.handleAddGroup,p=c.handleCloneGroup,b=c.handleRemoveGroup,h=c.handleToggleGroup,m=c.handleToggleAllGroups;return wp.element.createElement(e,{groupIdKey:"_id",groupFilterKey:"_type",id:n,name:r,value:o,error:i,field:l,groupValues:a,allGroupsAreCollapsed:s,onGroupSetup:u,onGroupFieldSetup:f,onAddGroup:d,onCloneGroup:p,onRemoveGroup:b,onToggleGroup:h,onToggleAllGroups:m,onChange:t.onChange})}))}}));const x=wp.date;n(221);var R=function(e){S(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return i(O(e=t.call.apply(t,[this].concat(o))),"handleChange",(function(t,n){var r=e.props,o=r.id,i=r.onChange,l=r.value,c=r.field,a=(0,x.format)(c.storage_format,n);a!==l&&i(o,a)})),e}return k(n,[{key:"render",value:function(){var e=this.handleChange;return(0,this.props.children)({handleChange:e})}}]),n}(C.Component);(0,f.addFilter)("carbon-fields.date_time.block","carbon-fields/blocks",(function(e){return function(t){return wp.element.createElement(R,t,(function(n){var r=n.handleChange;return wp.element.createElement(e,B({buttonText:(0,a.__)("Select Date","carbon-fields-ui")},t,{onChange:r}))}))}})),(0,f.addFilter)("carbon-fields.date.block","carbon-fields/blocks",(function(e){return function(t){return wp.element.createElement(R,t,(function(n){var r=n.handleChange;return wp.element.createElement(e,B({},t,{onChange:r}))}))}})),(0,f.addFilter)("carbon-fields.time.block","carbon-fields/blocks",(function(e){return function(t){return wp.element.createElement(R,t,(function(n){var r=n.handleChange;return wp.element.createElement(e,B({},t,{onChange:r}))}))}})),n(545),(0,f.addFilter)("carbon-fields.file.block","carbon-fields/blocks",(function(e){return function(t){return wp.element.createElement(e,B({buttonLabel:(0,a.__)("Select File","carbon-fields-ui"),mediaLibraryButtonLabel:(0,a.__)("Use File","carbon-fields-ui"),mediaLibraryTitle:(0,a.__)("Select File","carbon-fields-ui")},t))}}));const N=function(e){var t=e.type;return wp.element.createElement("em",null,(0,a.sprintf)((0,a.__)("Field of type '%s' is not supported in Gutenberg.","carbon-fields-ui"),[t]))};(0,f.addFilter)("carbon-fields.footer_scripts.block","carbon-fields/blocks",(function(){return function(e){return wp.element.createElement(N,{type:e.field.type})}})),(0,f.addFilter)("carbon-fields.header_scripts.block","carbon-fields/blocks",(function(){return function(e){return wp.element.createElement(N,{type:e.field.type})}})),(0,f.addFilter)("carbon-fields.hidden.block","carbon-fields/blocks",(function(){return function(e){return wp.element.createElement(N,{type:e.field.type})}})),(0,f.addFilter)("carbon-fields.image.block","carbon-fields/blocks",(function(e){return function(t){return wp.element.createElement(e,B({buttonLabel:(0,a.__)("Select Image","carbon-fields-ui"),mediaLibraryButtonLabel:(0,a.__)("Use Image","carbon-fields-ui"),mediaLibraryTitle:(0,a.__)("Select Image","carbon-fields-ui")},t))}})),n(998),n(790),n(442),(0,f.addFilter)("carbon-fields.media_gallery.block","carbon-fields/blocks",(function(e){return function(t){return wp.element.createElement(e,B({buttonLabel:(0,a.__)("Select Attachments","carbon-fields-ui"),mediaLibraryButtonLabel:(0,a.__)("Use Attachments","carbon-fields-ui"),mediaLibraryTitle:(0,a.__)("Select Attachments","carbon-fields-ui")},t))}})),n(730),n(519),n(1),n(455),n(604),(0,f.addFilter)("carbon-fields.sidebar.block","carbon-fields/blocks",(function(){return function(e){return wp.element.createElement(N,{type:e.field.type})}})),n(491),n(562),n(160),n(172),(0,f.addFilter)("carbon-fields.field-edit.block","carbon-fields/blocks",(0,u.compose)(v,(0,l.withDispatch)((function(e){if(!(0,s.isUndefined)(window._wpLoadBlockEditor)){var t=e("core/editor");return{lockSaving:t.lockPostSaving,unlockSaving:t.unlockPostSaving}}return{}})),d.withValidation));const D=(0,l.combineReducers)({containerDefinitionsByBlockName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"SETUP_CONTAINER_DEFINITIONS"===t.type?t.payload.definitions:e},fieldDefinitionsByBlockName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"SETUP_FIELD_DEFINITIONS"===t.type?t.payload.definitions:e}});function A(e){return{type:"SETUP_CONTAINER_DEFINITIONS",payload:{definitions:e}}}function L(e){return{type:"SETUP_FIELD_DEFINITIONS",payload:{definitions:e}}}function M(e,t){return e.containerDefinitionsByBlockName[t.replace("carbon-fields/","")]||{}}function U(e,t){return e.fieldDefinitionsByBlockName[t.replace("carbon-fields/","")]||[]}(0,l.registerStore)("carbon-fields/blocks",{reducer:D,actions:e,selectors:t});var q=n(184),V=n.n(q);const K=wp.components,$=wp.editor;n(270);const W=wp.apiFetch;var H=n.n(W),Z=function(e){S(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return i(O(e=t.call.apply(t,[this].concat(o))),"state",{response:null}),e}return k(n,[{key:"componentDidMount",value:function(){this.isStillMounted=!0,this.fetch(this.props),this.fetch=(0,s.debounce)(this.fetch,500)}},{key:"componentWillUnmount",value:function(){this.isStillMounted=!1}},{key:"componentDidUpdate",value:function(e){(0,s.isEqual)(e,this.props)||this.fetch(this.props)}},{key:"fetch",value:function(e){var t=this;if(this.isStillMounted){null!==this.state.response&&this.setState({response:null});var n=e.block,r=this.currentFetchRequest=H()({method:"post",path:"/carbon-fields/v1/block-renderer",data:{name:n.name,content:(0,c.serialize)([n])}}).then((function(e){t.isStillMounted&&r===t.currentFetchRequest&&e&&e.rendered&&t.setState({response:e.rendered})})).catch((function(e){t.isStillMounted&&r===t.currentFetchRequest&&t.setState({response:{error:!0,errorMsg:e.message}})}))}}},{key:"render",value:function(){var e=this.state.response,t=this.props.className;return e?e.error?wp.element.createElement(K.Placeholder,{className:t},(0,a.sprintf)((0,a.__)("Error loading block: %s","carbon-fields-ui"),e.errorMsg)):e.length?wp.element.createElement(C.RawHTML,{key:"html",className:t},e):wp.element.createElement(K.Placeholder,{className:t},(0,a.__)("No results found.","carbon-fields-ui")):wp.element.createElement(K.Placeholder,{className:t},wp.element.createElement(K.Spinner,null))}}]),n}(C.Component);const z=(0,l.withSelect)((function(e,t){var n=t.clientId;return{block:(0,e("core/block-editor").getBlock)(n)}}))(Z);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=function(e){S(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return i(O(e=t.call.apply(t,[this].concat(o))),"state",{mode:e.props.container.settings.mode,currentTab:e.props.supportsTabs?Object.keys(e.props.container.settings.tabs)[0]:null}),i(O(e),"handleFieldChange",(function(t,n){var r=e.props,o=r.attributes,l=r.setAttributes,c=t.replace(/^.+__(.+)?$/,"$1");l({data:Q(Q({},o.data),{},i({},c,n))})})),i(O(e),"handleModeChange",(function(){e.setState({mode:e.isInEditMode?"preview":"edit"})})),i(O(e),"handleTabChange",(function(t){e.setState({currentTab:t})})),i(O(e),"renderField",(function(t,n){var r=e.props,o=r.clientId,i=r.container,l=r.attributes,c=(0,d.getFieldType)(t.type,"block");if(!c)return null;var a="cf-".concat(o,"__").concat(t.base_name),u=(0,s.get)(l.data,t.base_name,t.default_value);return wp.element.createElement(G,{key:n,id:a,field:t},wp.element.createElement(c,{id:a,containerId:i.id,blockId:o,value:u,field:t,name:t.base_name,onChange:e.handleFieldChange}))})),e}return k(n,[{key:"isInEditMode",get:function(){return"edit"===this.state.mode}},{key:"isInPreviewMode",get:function(){return"preview"===this.state.mode}},{key:"renderTabbedFields",value:function(e){var t=this,n=this.props.fields;return(0,s.map)(e,(function(e,r){var o=(0,s.find)(n,["name",e]);return t.renderField(o,r)}))}},{key:"renderNonTabbedFields",value:function(){return wp.element.createElement("div",{className:"cf-block__fields"},this.props.fields.map(this.renderField))}},{key:"render",value:function(){var e=this,t=this.state.currentTab,n=this.props,r=n.clientId,o=n.container,i=n.supportsTabs,l=n.supportsPreview,c=n.supportsInnerBlocks&&this.isInEditMode&&wp.element.createElement("div",{className:"cf-block__inner-blocks"},wp.element.createElement($.InnerBlocks,{template:o.settings.inner_blocks.template,templateLock:o.settings.inner_blocks.template_lock,allowedBlocks:o.settings.inner_blocks.allowed_blocks}));return wp.element.createElement(C.Fragment,null,"above"===o.settings.inner_blocks.position&&c,l&&wp.element.createElement($.BlockControls,null,wp.element.createElement(K.ToolbarGroup,{label:"Options",controls:[{icon:this.isInEditMode?"visibility":"hidden",title:this.isInEditMode?(0,a.__)("Show preview","carbon-fields-ui"):(0,a.__)("Hide preview","carbon-fields-ui"),onClick:this.handleModeChange}]})),this.isInEditMode&&i&&wp.element.createElement("div",{className:"cf-block__tabs"},wp.element.createElement("ul",{className:"cf-block__tabs-list"},(0,s.map)(o.settings.tabs,(function(n,r){var o=V()("cf-block__tabs-item",{"cf-block__tabs-item--current":r===t});return wp.element.createElement("li",{key:r,className:o,onClick:function(){return e.handleTabChange(r)}},r)})))),this.isInEditMode&&(i?(0,s.map)(o.settings.tabs,(function(n,r){return wp.element.createElement("div",{className:"cf-block__fields",key:r,hidden:r!==t},e.renderTabbedFields(n))})):this.renderNonTabbedFields()),this.isInPreviewMode&&wp.element.createElement("div",{className:"cf-block__preview"},wp.element.createElement(z,{clientId:r})),"below"===o.settings.inner_blocks.position&&c,this.isInPreviewMode&&wp.element.createElement($.InspectorControls,null,i?(0,s.map)(o.settings.tabs,(function(t,n){return wp.element.createElement(K.PanelBody,{key:n,title:n},wp.element.createElement("div",{className:"cf-block__fields"},e.renderTabbedFields(t)))})):wp.element.createElement(K.PanelBody,{title:(0,a.__)("Fields","carbon-fields-ui")},this.renderNonTabbedFields())))}}]),n}(C.Component);const Y=(0,l.withSelect)((function(e,t){var n=t.clientId,r=t.name,o=e("core/blocks").hasBlockSupport,i=e("core/block-editor").getBlockRootClientId,l=e("carbon-fields/blocks"),c=l.getContainerDefinitionByBlockName,a=l.getFieldDefinitionsByBlockName,s=i(n);return{container:c(r),fields:a(r),supportsTabs:o(r,"tabs"),supportsPreview:o(r,"preview")&&!s,supportsInnerBlocks:o(r,"innerBlocks")}}))(X);var ee=function(e){S(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}(n);function n(){return w(this,n),t.apply(this,arguments)}return k(n,[{key:"render",value:function(){return null}}]),n}(C.Component);wp.hooks.addFilter("blocks.getSaveElement","carbon-fields/blocks",(function(e,t){return/^carbon\-fields\/.+$/.test(t.name)&&t.supports.innerBlocks?wp.element.createElement($.InnerBlocks.Content,null):e}));const te=ee;function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(0,a.setLocaleData)(window.cf.config.locale,"carbon-fields-ui");var ie={},le={};(0,s.get)(window.cf,"preloaded.blocks",[]).forEach((function(e){var t=(0,s.kebabCase)(e.id).replace("carbon-fields-container-",""),n=function(e){return e.reduce((function(e,t){return re(re({},e),{},i({},t.base_name,t.default_value))}),{})}(e.fields),r=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,s.get)(e,"settings.".concat(t),n)};ie[t]=e,le[t]=e.fields.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)})),(0,c.registerBlockType)("carbon-fields/".concat(t),{title:e.title,icon:r("icon"),parent:r("parent",[]),category:r("category.slug"),keywords:r("keywords",[]),description:r("description",""),attributes:{data:{type:"object",default:n},anchor:{type:"string",source:"attribute",attribute:"id",selector:"*"}},supports:{tabs:(0,s.isPlainObject)(r("tabs")),preview:r("preview"),innerBlocks:r("inner_blocks.enabled"),alignWide:!0,align:["wide","full"],anchor:!0,html:!1},edit:Y,save:te,example:!0})})),(0,l.dispatch)("carbon-fields/blocks").setupContainerDefinitions(ie),(0,l.dispatch)("carbon-fields/blocks").setupFieldDefinitions(le)})()})();